namespace = starborn

#2. tried to cheat enlarging habitat
country_event = {
        id = starborn.2    
	title = "starborn.2.name"
	desc = "starborn.2.desc"
	show_sound = event_mystic_reveal
	picture = GFX_evt_colony_settlement
	is_triggered_only = yes
        location = FromFromFrom.Planet

	option = {
		name = "starborn.2.option.a"
	}
}



#6. hab enlargement failed because you lacked resources
country_event = {
        id = starborn.6    
	title = "starborn.6.name"
	desc = "starborn.6.desc"
	show_sound = event_mystic_reveal
	picture = GFX_evt_colony_settlement
	is_triggered_only = yes
        location = FromFromFrom.Planet

	option = {
		name = "starborn.6.option.a"
	}
}


#10 put refund modifer on smaller hab alloys cost
planet_event = {
        id = starborn.10
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		owner = {
			has_starborn = yes
		}
                is_planet_class = pc_habitat
        }

        immediate = {
                if = {
                        limit = {
                                planet_size = 3
                        }
                        add_deposit = d_starborn_refund_size_3
                }

                if = {
                        limit = {
                                planet_size = 4
                        }
                        add_deposit = d_starborn_refund_size_4
                }
        }
}

# 11. Remove whole planetary farming when colonised
planet_event = {
        id = starborn.11
	is_triggered_only = yes
        title = "starborn.11.name"
	desc = "starborn.11.desc"
	picture = GFX_evt_colony_settlement

	trigger = {
		owner = {
                        any_planet_within_border = {
                                has_planet_flag = habitat_of@root
                                has_planet_flag = starborn_farming_habitat
                        }
		}
        }

        immediate = {
                random_planet = {
                        limit = {
                                has_planet_flag = habitat_of@prev
                                has_planet_flag = starborn_farming_habitat
                        }
                        save_event_target_as = target
                        remove_modifier = starborn_farming_planet
                }
        }
        option = {
                name = "starborn.11.option.a"
        }
}


# 12. Remove tomb world savenger when terraformed
planet_event = {
        id = starborn.12
        title = "starborn.12.name"
	desc = "starborn.12.desc"
        is_triggered_only = yes
	picture = GFX_evt_colony_settlement

	trigger = {
                solar_system = {
                        any_system_planet = {
                                has_planet_flag = habitat_of@root
                                has_planet_flag = starborn_tomb_scavenging
                        }   
                }
        }

        immediate = {
                save_event_target_as = src_planet
                random_planet = {
                        limit = {
                                has_planet_flag = habitat_of@root
                                has_planet_flag = starborn_tomb_scavenging
                        }
                        save_event_target_as = target_hab
                        remove_planet_flag = starborn_tomb_scavenging
                        while = {
                                limit = {
                                        num_districts = {
                                                type = district_starborn_starting_scavenger
                                                value > 0                                                
                                        }
                                }
                                remove_district = district_starborn_starting_scavenger
                                add_district = district_starborn_surface_farming
                        }
                        set_planet_flag = starborn_farming_habitat
                        
                        if = {
                                limit = {
                                        root = {
                                                has_owner = no
                                        }
                                }
                                add_modifier = {
                                        modifier = starborn_farming_planet
                                        days = -1
                                }
                        }
                      
                }
        }

        option = {
		name = "starborn.12.option.a"
	}
}

# 13. Add City world mod when converted
planet_event = {
        id = starborn.13
        is_triggered_only = yes
	title = "starborn.13.name"
	desc = "starborn.13.desc"
	picture = GFX_evt_city_planet

	trigger = {
		owner = {
                        has_starborn = yes
                        any_planet_within_border = {
                                has_planet_flag = habitat_of@root
                        }
                }
        }

        immediate = {
                set_planet_flag = starborn_citied
                random_planet = {
                        limit = {
                                has_planet_flag = habitat_of@root
                        }
                        save_event_target_as = target
                        remove_planet_flag = starborn_tomb_scavenging
                        remove_planet_flag = starborn_farming_habitat
                        remove_modifier = starborn_farming_planet
                        
                        while = {
                                limit = {
                                        num_districts = {
                                                type = district_starborn_starting_scavenger
                                                value > 0                                                
                                        }
                                }
                                remove_district = district_starborn_starting_scavenger
                                add_district = district_hab_commercial
                        }
                        while = {
                                limit = {
                                        num_districts = {
                                                type = district_starborn_surface_farming
                                                value > 0                                                
                                        }
                                }
                                remove_district = district_starborn_surface_farming
                                add_district = district_hab_commercial
                        }
                        add_modifier = {
                                modifier = starborn_pc_city_trade_value
                                days = -1
                        }

                }
        }

        option = {
                name = "starborn.13.option.a"
        }
}


# 14. Remove tomb world savenger from orbital city when home world terraformed
planet_event = {
        id = starborn.14
        title = "starborn.14.name"
	desc = "starborn.14.desc"
        is_triggered_only = yes	
	picture = GFX_evt_colony_settlement

	trigger = {
                has_planet_flag = starborn_origin
        }

        immediate = {
                solar_system = {
                        random_system_planet = {
                                limit = {
                                       is_planet_class = pc_starborn_habitat_start
                                }
                                remove_planet_flag = starborn_tomb_scavenging
                                while = {
                                        limit = {
                                                num_districts = {
                                                        type = district_starborn_starting_scavenger
                                                        value > 0                                                
                                                }
                                        }
                                        remove_district = district_starborn_starting_scavenger
                                        add_district = district_starborn_surface_farming
                                }
                                set_planet_flag = starborn_farming_habitat
                                if = {
                                        limit = {
                                                root = {
                                                        has_owner = no
                                                }
                                        }
                                        add_modifier = {
                                                modifier = starborn_farming_planet
                                                days = -1
                                        }
                                }
                        }
                }
        }

        option = {
		name = "starborn.14.option.a"
	}
}


# 15.  Homeworld converted to city
planet_event = {
        id = starborn.15
        is_triggered_only = yes
	title = "starborn.15.name"
	desc = "starborn.15.desc"
	picture = GFX_evt_city_planet

	trigger = {
                has_planet_flag = starborn_origin
                NOT = {
                        has_planet_flag = starborn_origin_citied
                }
        }

        immediate = {
                save_event_target_as = src_planet
                set_planet_flag = starborn_origin_citied
                solar_system = {
                        random_system_planet = {
                                limit = {
                                        is_planet_class = pc_starborn_habitat_start
                                }
                                save_event_target_as = target
                                remove_planet_flag = starborn_tomb_scavenging
                                remove_planet_flag = starborn_farming_habitat
                                remove_modifier = starborn_farming_planet

                                set_planet_flag = commercial_habitat                              
                                
                                while = {
                                        limit = {
                                                num_districts = {
                                                        type = district_starborn_starting_scavenger
                                                        value > 0                                                
                                                }
                                        }
                                        remove_district = district_starborn_starting_scavenger
                                        add_district = district_starborn_hab_commercial
                                }
                                while = {
                                        limit = {
                                                num_districts = {
                                                        type = district_starborn_surface_farming
                                                        value > 0                                                
                                                }
                                        }
                                        remove_district = district_starborn_surface_farming
                                        add_district = district_starborn_hab_commercial
                                }
                                add_modifier = {
                                        modifier = starborn_pc_city_trade_value
                                        days = -1
                                }
                        }
                }
        }

        option = {
                name = "starborn.15.option.a"
        }
}

# Habitat Complex Complete Notification
country_event = {
	id = "starborn.20"
	title = "starborn.20.name"
	desc = "starborn.20.desc"
	picture = GFX_evt_colony_settlement
	is_triggered_only = yes
	location = FromFromFrom.Planet

	option = {
		name = EXCELLENT
	}
}

# annual poll for city conversion
country_event = {
        id = "starborn.21"
        hide_window = yes
        is_triggered_only = yes

        trigger = {
                has_civic = civic_starborn
                has_ascension_perk = ap_arcology_project
                any_owned_planet = {
                        is_planet_class = pc_city
                        NOR = { 
                                has_planet_flag = starborn_citied
                                has_planet_flag = starborn_origin_citied
                        }
                }
        }

        immediate = {
                every_owned_planet = {
                        limit = {
                                is_planet_class = pc_city
                                NOR = {
                                        has_planet_flag = starborn_origin
                                        has_planet_flag = starborn_citied
                                }
                        }
                        planet_event = {
                                id = starborn.13
                        }
                }

                random_owned_planet = {
                        limit = {
                                is_planet_class = pc_city
                                has_planet_flag = starborn_origin
                                NOT = {
                                        has_planet_flag = starborn_origin_citied
                                }
                        }
                        planet_event = {
                                id = starborn.15
                        }
                }
        }
}

